<% options_param_name ||= :options %>
<% if product.has_variants? %>
  <div id='product-variant-picker' class="product-variant-picker-compact">
    <% product.option_types.each_with_index do |option_type, index| %>
      <% selected_option = product_selected_option_for_option(option_type, product: product, selected_variant: selected_variant, options_param_name: options_param_name) %>
      <% if option_type.color? %>
        <%= option_type_colors_preview_styles(option_type).html_safe %>
        <fieldset data-option-id="<%= option_type.id %>" class="variant-picker-fieldset-compact">
          <label class="variant-picker-label-compact">
            <span class="variant-picker-label text-xs uppercase tracking-wide"><%= Spree.t('storefront.variant_picker.color', default: 'Renk') %>:</span>
            <span class="text-sm font-medium text-gray-900 ml-1" data-product-form-target="selectedColor">
              <%= product_selected_option_for_option(option_type, product: product, selected_variant: selected_variant, options_param_name: options_param_name)&.presentation || Spree.t('storefront.variant_picker.select', default: 'SeÃ§in') %>
            </span>
          </label>
          <ul class="variant-options-list-compact">
            <%= render 'spree/products/variant_options', product: product, option_type: option_type, position: index, selected_variant: selected_variant, options_param_name: options_param_name %>
          </ul>
        </fieldset>
      <% else %>
        <fieldset data-option-id="<%= option_type.id %>" class="variant-picker-fieldset-compact">
          <div class="flex items-center justify-between mb-2">
            <label class="variant-picker-label-compact">
              <span class="variant-picker-label text-xs uppercase tracking-wide"><%= Spree.t('storefront.variant_picker.size', default: 'Beden') %>:</span>
            </label>
            <a href="#" class="text-xs text-gray-500 hover:text-gray-700 underline">
              <%= Spree.t('storefront.variant_picker.size_guide', default: 'Beden Tablosu') %>
            </a>
          </div>
          <div class="variant-options-list-compact">
            <%= render 'spree/products/variant_options', product: product, option_type: option_type, position: index, selected_variant: selected_variant, options_param_name: options_param_name %>
          </div>
        </fieldset>
      <% end %>
    <% end %>
  </div>
<% end %>
